# Auto-Generated OpenAPI Specification

‚ö†Ô∏è **DO NOT EDIT FILES IN THIS DIRECTORY MANUALLY** ‚ö†Ô∏è

This directory contains **automatically generated** OpenAPI specification and Swagger UI files.

## What is this?

- `api.json` - OpenAPI 3.0 specification of the Laravel API
- `swagger-ui.html` - Interactive API documentation interface

## How is it generated?

Generated by: Laravel OpenAPI generator

Command:
```bash
composer ci-openapi-doc
```

Or via Artisan:
```bash
php artisan openapi:generate
```

Triggered by:
- **Manually:** Before publishing API client or updating API docs
- **Recommended:** Run after adding/modifying API endpoints

## How to update?

```bash
# From project root
composer ci-openapi-doc
```

This will:
1. Scan Laravel routes and controllers
2. Parse PHPDoc annotations
3. Generate OpenAPI 3.0 specification
4. Save to `docs/_openapi/api.json`
5. Generate/update Swagger UI HTML

## Integration with Jekyll

These files are copied to the Jekyll site root by a plugin:

- `api.json` ‚Üí `/api.json` (raw JSON, no HTML wrapper)
- `swagger-ui.html` ‚Üí `/swagger-ui.html` (interactive documentation)

**Plugin:** `docs/_plugins/copy_static_files.rb`

The plugin ensures these files are:
- ‚úÖ Served as static files (not processed by Jekyll markdown)
- ‚úÖ Accessible at root level of documentation site
- ‚úÖ Up-to-date with source files

## Accessing the Files

### On GitHub Pages
- **OpenAPI Spec:** `https://metanull.github.io/inventory-app/api.json`
- **Swagger UI:** `https://metanull.github.io/inventory-app/swagger-ui.html`

### Locally (during development)
- **OpenAPI Spec:** `http://localhost:4000/api.json`
- **Swagger UI:** `http://localhost:4000/swagger-ui.html`

## Important Notes

- ‚úÖ **Committed to Git:** Yes, for documentation availability
- ‚ö†Ô∏è **Edit manually:** No, changes will be overwritten
- üîÑ **Regenerate frequency:** After API endpoint changes
- üìù **Source of truth:** Laravel routes, controllers, and FormRequest classes

## Wrapper Files (Deprecated)

Previously, these files were wrapped in markdown files:
- ‚ùå `docs/api.json.md` (DELETED - now handled by plugin)
- ‚ùå `docs/swagger-ui.html.md` (DELETED - now handled by plugin)

The wrapper files caused issues (HTML `<p>` tags wrapping JSON). The plugin approach is cleaner and more reliable.

## Related Files

- Laravel routes: `routes/api.php`
- API controllers: `app/Http/Controllers/Api/`
- Form requests: `app/Http/Requests/`
- Jekyll plugin: `docs/_plugins/copy_static_files.rb`
- Composer script: Check `composer.json` for `ci-openapi-doc`

## Validation

To validate the OpenAPI specification:

```bash
# Online validators
# - https://editor.swagger.io/
# - Paste contents of api.json

# Or use CLI tools
npx @apidevtools/swagger-cli validate docs/_openapi/api.json
```

## TypeScript Client Generation

The OpenAPI spec is used to generate the TypeScript client:

```bash
# Generate client from spec
. ./scripts/generate-api-client.ps1
```

This reads `docs/_openapi/api.json` and generates TypeScript code in `api-client/` directory.
